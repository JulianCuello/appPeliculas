<?php require './templates/task/header.phtml'; ?>

<div class="container mt-5">
    <?php if (!empty($lista)): 
        $pelicula = $lista[0]; // Datos de la película
    ?>
        <div class="card mb-3">
            <div class="row g-0">
                <?php if (!empty($pelicula->img)): ?>
                <div class="col-md-4">
                    <img src="<?= $pelicula->img; ?>" class="img-fluid rounded-start" alt="<?= $pelicula->nombre_pelicula; ?>">
                </div>
                <?php endif; ?>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title"><?= $pelicula->nombre_pelicula; ?></h5>
                        <p class="card-text"><strong>Duración:</strong> <?= $pelicula->duracion; ?> minutos</p>
                        <p class="card-text"><strong>Género:</strong> <?= $pelicula->genero; ?></p>
                        <p class="card-text"><strong>Descripción:</strong> <?= $pelicula->descripcion; ?></p>
                        <p class="card-text"><strong>Fecha de estreno:</strong> <?= $pelicula->fecha_estreno; ?></p>
                        <p class="card-text"><strong>Público:</strong> <?= $pelicula->publico; ?></p>
                        
                        <h6 class="mt-3">Actores:</h6>
                        <ul class="list-group">
                            <?php 
                            $actores_mostrados = [];
                            foreach ($lista as $item) { 
                                if (isset($item->nombre_actor) && !in_array($item->nombre_actor, $actores_mostrados)) {
                                    $actores_mostrados[] = $item->nombre_actor;
                            ?>
                                <li class="list-group-item">
                                    <a href="actorId/<?= $item->id_actor; ?>"><?= $item->nombre_actor; ?></a>
                                </li>
                            <?php 
                                }
                            } 
                            if (empty($actores_mostrados)) {
                                echo '<li class="list-group-item text-muted">No hay actores registrados</li>';
                            }
                            ?>
                        </ul>
                        
                        <a href="lista" class="btn btn-primary mt-3">Volver</a>
                    </div>
                </div>
            </div>
        </div>
    <?php endif; ?>
</div>

<?php require_once 'templates/task/footer.phtml'; ?>